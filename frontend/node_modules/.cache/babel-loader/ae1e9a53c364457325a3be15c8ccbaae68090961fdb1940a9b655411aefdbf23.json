{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\isuru\\\\Documents\\\\SLIIT\\\\y3paf\\\\skill-bridge\\\\frontend\\\\src\\\\components\\\\CreatePost.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axiosInstance from \"../utils/axios\";\nimport { useNavigate } from \"react-router-dom\"; // Add this import\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CreatePost({\n  onPostCreated\n}) {\n  _s();\n  const [content, setContent] = useState(\"\");\n  const [images, setImages] = useState([]);\n  const [video, setVideo] = useState(null);\n  const [previewUrls, setPreviewUrls] = useState([]);\n  const [videoPreviewUrl, setVideoPreviewUrl] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const navigate = useNavigate();\n  const handleImageChange = e => {\n    const files = Array.from(e.target.files);\n    if (files.length > 0) {\n      // Validate images\n      const validImages = files.every(file => file.type.startsWith(\"image/\"));\n      if (!validImages) {\n        setError(\"Please upload only image files\");\n        return;\n      }\n      setImages(files);\n      // Create and store preview URLs\n      const urls = files.map(file => URL.createObjectURL(file));\n      setPreviewUrls(urls);\n      setError(\"\");\n      // Clear video if any\n      setVideo(null);\n      setVideoPreviewUrl(\"\");\n    }\n  };\n  const handleVideoChange = e => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Check file size (max 15MB)\n    if (file.size > 15 * 1024 * 1024) {\n      setError(\"Video size must be less than 15MB\");\n      return;\n    }\n\n    // Check file type\n    if (![\"video/mp4\", \"video/quicktime\"].includes(file.type)) {\n      setError(\"Only MP4 and QuickTime videos are supported\");\n      return;\n    }\n\n    // Create a URL for preview\n    const videoURL = URL.createObjectURL(file);\n\n    // Create a video element to check duration\n    const videoElement = document.createElement(\"video\");\n    videoElement.preload = \"metadata\";\n    videoElement.onloadedmetadata = () => {\n      window.URL.revokeObjectURL(videoElement.src);\n      if (videoElement.duration > 30) {\n        setError(\"Video must be 30 seconds or less\");\n        return;\n      }\n\n      // Add a timestamp to the file name to avoid caching issues\n      const timestamp = new Date().getTime();\n      const newFile = new File([file], `video-${timestamp}-${file.name}`, {\n        type: file.type\n      });\n      setVideo(newFile);\n      setVideoPreviewUrl(videoURL);\n      // Clear any images when video is selected\n      setImages([]);\n      setPreviewUrls([]);\n      setError(\"\");\n    };\n    videoElement.onerror = () => {\n      setError(\"Could not load video. Please try a different file.\");\n      window.URL.revokeObjectURL(videoElement.src);\n    };\n    videoElement.src = videoURL;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(\"\");\n    setProgress(0);\n    setIsLoading(true);\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n    if (!user || !user.id) {\n      navigate(\"/login\");\n      return;\n    }\n    try {\n      const formData = new FormData();\n      formData.append(\"userId\", user.id);\n      formData.append(\"content\", content);\n      if (video) {\n        formData.append(\"video\", video);\n      } else if (images.length > 0) {\n        images.forEach(image => formData.append(\"images\", image));\n      }\n      const response = await axiosInstance.post(\"/api/posts\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        },\n        onUploadProgress: progressEvent => {\n          const percentCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n          setProgress(percentCompleted);\n        }\n      });\n\n      // Clean up preview URLs before resetting state\n      previewUrls.forEach(url => URL.revokeObjectURL(url));\n      if (videoPreviewUrl) URL.revokeObjectURL(videoPreviewUrl);\n\n      // Reset form\n      setContent(\"\");\n      setImages([]);\n      setVideo(null);\n      setPreviewUrls([]);\n      setVideoPreviewUrl(\"\");\n      setProgress(0);\n      if (onPostCreated) {\n        onPostCreated(response.data);\n      }\n\n      // Show success message\n      alert(\"Post created successfully!\");\n    } catch (error) {\n      var _error$response;\n      console.error(\"Error creating post:\", error);\n      if (error.code === \"ECONNABORTED\") {\n        setError(\"Upload timed out. Please try again with a smaller file or check your connection.\");\n      } else if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 403) {\n        setError(\"Not authorized. Please log in again.\");\n        localStorage.removeItem(\"user\");\n        navigate(\"/login\");\n      } else {\n        var _error$response2, _error$response2$data, _error$response3;\n        const errorMessage = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || \"Failed to create post. Please try again.\";\n        setError(typeof errorMessage === \"object\" ? JSON.stringify(errorMessage) : errorMessage);\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Clean up preview URLs on unmount\n  useEffect(() => {\n    return () => {\n      previewUrls.forEach(url => URL.revokeObjectURL(url));\n      if (videoPreviewUrl) URL.revokeObjectURL(videoPreviewUrl);\n    };\n  }, [previewUrls, videoPreviewUrl]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-lg shadow-md p-4 mb-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-semibold mb-4\",\n      children: \"Create Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500 mb-4\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n        className: \"w-full p-3 border rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n        rows: \"3\",\n        placeholder: \"What's on your mind?\",\n        value: content,\n        onChange: e => setContent(e.target.value),\n        disabled: isLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 flex flex-wrap gap-2\",\n        children: [previewUrls.map((url, index) => /*#__PURE__*/_jsxDEV(\"img\", {\n          src: url,\n          alt: `Preview ${index}`,\n          className: \"w-24 h-24 object-cover rounded-lg\"\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 13\n        }, this)), videoPreviewUrl && /*#__PURE__*/_jsxDEV(\"video\", {\n          src: videoPreviewUrl,\n          className: \"w-full max-h-96 object-contain\",\n          controls: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"cursor-pointer\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              multiple: true,\n              accept: \"image/*\",\n              onChange: handleImageChange,\n              className: \"hidden\",\n              disabled: !!video || isLoading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-8 h-8 text-blue-500 hover:text-blue-600\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: \"2\",\n                d: \"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: \"2\",\n                d: \"M15 13a3 3 0 11-6 0 3 3 0 016 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"cursor-pointer\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \"video/mp4,video/quicktime\",\n              onChange: handleVideoChange,\n              className: \"hidden\",\n              disabled: images.length > 0 || isLoading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-8 h-8 text-blue-500 hover:text-blue-600\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: \"2\",\n                d: \"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isLoading || !content && !video && images.length === 0,\n          className: `px-6 py-2 rounded-lg font-semibold text-white\n              ${isLoading || !content && !video && images.length === 0 ? \"bg-gray-300 cursor-not-allowed\" : \"bg-blue-500 hover:bg-blue-600\"}`,\n          children: isLoading ? \"Posting...\" : \"Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), isLoading && progress > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full h-2 bg-gray-200 rounded-full mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-full bg-blue-500 rounded-full transition-all duration-300\",\n        style: {\n          width: `${progress}%`\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-center mt-1\",\n        children: [\"Uploading: \", progress, \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 179,\n    columnNumber: 5\n  }, this);\n}\n_s(CreatePost, \"WktjzrnzquMijTx/Mb6HCbdIuNE=\", false, function () {\n  return [useNavigate];\n});\n_c = CreatePost;\nexport default CreatePost;\nvar _c;\n$RefreshReg$(_c, \"CreatePost\");","map":{"version":3,"names":["React","useState","useEffect","axiosInstance","useNavigate","jsxDEV","_jsxDEV","CreatePost","onPostCreated","_s","content","setContent","images","setImages","video","setVideo","previewUrls","setPreviewUrls","videoPreviewUrl","setVideoPreviewUrl","error","setError","isLoading","setIsLoading","progress","setProgress","navigate","handleImageChange","e","files","Array","from","target","length","validImages","every","file","type","startsWith","urls","map","URL","createObjectURL","handleVideoChange","size","includes","videoURL","videoElement","document","createElement","preload","onloadedmetadata","window","revokeObjectURL","src","duration","timestamp","Date","getTime","newFile","File","name","onerror","handleSubmit","preventDefault","user","JSON","parse","localStorage","getItem","id","formData","FormData","append","forEach","image","response","post","headers","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","total","url","data","alert","_error$response","console","code","status","removeItem","_error$response2","_error$response2$data","_error$response3","errorMessage","message","stringify","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","rows","placeholder","value","onChange","disabled","index","alt","controls","multiple","accept","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","style","width","_c","$RefreshReg$"],"sources":["C:/Users/isuru/Documents/SLIIT/y3paf/skill-bridge/frontend/src/components/CreatePost.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axiosInstance from \"../utils/axios\";\r\nimport { useNavigate } from \"react-router-dom\"; // Add this import\r\n\r\nfunction CreatePost({ onPostCreated }) {\r\n  const [content, setContent] = useState(\"\");\r\n  const [images, setImages] = useState([]);\r\n  const [video, setVideo] = useState(null);\r\n  const [previewUrls, setPreviewUrls] = useState([]);\r\n  const [videoPreviewUrl, setVideoPreviewUrl] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  const navigate = useNavigate();\r\n\r\n  const handleImageChange = (e) => {\r\n    const files = Array.from(e.target.files);\r\n    if (files.length > 0) {\r\n      // Validate images\r\n      const validImages = files.every((file) => file.type.startsWith(\"image/\"));\r\n      if (!validImages) {\r\n        setError(\"Please upload only image files\");\r\n        return;\r\n      }\r\n\r\n      setImages(files);\r\n      // Create and store preview URLs\r\n      const urls = files.map((file) => URL.createObjectURL(file));\r\n      setPreviewUrls(urls);\r\n      setError(\"\");\r\n      // Clear video if any\r\n      setVideo(null);\r\n      setVideoPreviewUrl(\"\");\r\n    }\r\n  };\r\n\r\n  const handleVideoChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    // Check file size (max 15MB)\r\n    if (file.size > 15 * 1024 * 1024) {\r\n      setError(\"Video size must be less than 15MB\");\r\n      return;\r\n    }\r\n\r\n    // Check file type\r\n    if (![\"video/mp4\", \"video/quicktime\"].includes(file.type)) {\r\n      setError(\"Only MP4 and QuickTime videos are supported\");\r\n      return;\r\n    }\r\n\r\n    // Create a URL for preview\r\n    const videoURL = URL.createObjectURL(file);\r\n\r\n    // Create a video element to check duration\r\n    const videoElement = document.createElement(\"video\");\r\n    videoElement.preload = \"metadata\";\r\n\r\n    videoElement.onloadedmetadata = () => {\r\n      window.URL.revokeObjectURL(videoElement.src);\r\n\r\n      if (videoElement.duration > 30) {\r\n        setError(\"Video must be 30 seconds or less\");\r\n        return;\r\n      }\r\n\r\n      // Add a timestamp to the file name to avoid caching issues\r\n      const timestamp = new Date().getTime();\r\n      const newFile = new File([file], `video-${timestamp}-${file.name}`, {\r\n        type: file.type,\r\n      });\r\n\r\n      setVideo(newFile);\r\n      setVideoPreviewUrl(videoURL);\r\n      // Clear any images when video is selected\r\n      setImages([]);\r\n      setPreviewUrls([]);\r\n      setError(\"\");\r\n    };\r\n\r\n    videoElement.onerror = () => {\r\n      setError(\"Could not load video. Please try a different file.\");\r\n      window.URL.revokeObjectURL(videoElement.src);\r\n    };\r\n\r\n    videoElement.src = videoURL;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setProgress(0);\r\n    setIsLoading(true);\r\n\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n    if (!user || !user.id) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"userId\", user.id);\r\n      formData.append(\"content\", content);\r\n\r\n      if (video) {\r\n        formData.append(\"video\", video);\r\n      } else if (images.length > 0) {\r\n        images.forEach((image) => formData.append(\"images\", image));\r\n      }\r\n\r\n      const response = await axiosInstance.post(\"/api/posts\", formData, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n        onUploadProgress: (progressEvent) => {\r\n          const percentCompleted = Math.round(\r\n            (progressEvent.loaded * 100) / progressEvent.total\r\n          );\r\n          setProgress(percentCompleted);\r\n        },\r\n      });\r\n\r\n      // Clean up preview URLs before resetting state\r\n      previewUrls.forEach((url) => URL.revokeObjectURL(url));\r\n      if (videoPreviewUrl) URL.revokeObjectURL(videoPreviewUrl);\r\n\r\n      // Reset form\r\n      setContent(\"\");\r\n      setImages([]);\r\n      setVideo(null);\r\n      setPreviewUrls([]);\r\n      setVideoPreviewUrl(\"\");\r\n      setProgress(0);\r\n\r\n      if (onPostCreated) {\r\n        onPostCreated(response.data);\r\n      }\r\n\r\n      // Show success message\r\n      alert(\"Post created successfully!\");\r\n    } catch (error) {\r\n      console.error(\"Error creating post:\", error);\r\n      if (error.code === \"ECONNABORTED\") {\r\n        setError(\r\n          \"Upload timed out. Please try again with a smaller file or check your connection.\"\r\n        );\r\n      } else if (error.response?.status === 403) {\r\n        setError(\"Not authorized. Please log in again.\");\r\n        localStorage.removeItem(\"user\");\r\n        navigate(\"/login\");\r\n      } else {\r\n        const errorMessage =\r\n          error.response?.data?.message ||\r\n          error.response?.data ||\r\n          \"Failed to create post. Please try again.\";\r\n        setError(\r\n          typeof errorMessage === \"object\"\r\n            ? JSON.stringify(errorMessage)\r\n            : errorMessage\r\n        );\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Clean up preview URLs on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      previewUrls.forEach((url) => URL.revokeObjectURL(url));\r\n      if (videoPreviewUrl) URL.revokeObjectURL(videoPreviewUrl);\r\n    };\r\n  }, [previewUrls, videoPreviewUrl]);\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-md p-4 mb-4\">\r\n      <h2 className=\"text-xl font-semibold mb-4\">Create Post</h2>\r\n      {error && <p className=\"text-red-500 mb-4\">{error}</p>}\r\n      <form onSubmit={handleSubmit}>\r\n        <textarea\r\n          className=\"w-full p-3 border rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          rows=\"3\"\r\n          placeholder=\"What's on your mind?\"\r\n          value={content}\r\n          onChange={(e) => setContent(e.target.value)}\r\n          disabled={isLoading}\r\n        />\r\n\r\n        <div className=\"mb-4 flex flex-wrap gap-2\">\r\n          {previewUrls.map((url, index) => (\r\n            <img\r\n              key={index}\r\n              src={url}\r\n              alt={`Preview ${index}`}\r\n              className=\"w-24 h-24 object-cover rounded-lg\"\r\n            />\r\n          ))}\r\n          {videoPreviewUrl && (\r\n            <video\r\n              src={videoPreviewUrl}\r\n              className=\"w-full max-h-96 object-contain\"\r\n              controls\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex justify-between items-center\">\r\n          <div className=\"flex gap-4\">\r\n            <label className=\"cursor-pointer\">\r\n              <input\r\n                type=\"file\"\r\n                multiple\r\n                accept=\"image/*\"\r\n                onChange={handleImageChange}\r\n                className=\"hidden\"\r\n                disabled={!!video || isLoading}\r\n              />\r\n              <svg\r\n                className=\"w-8 h-8 text-blue-500 hover:text-blue-600\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth=\"2\"\r\n                  d=\"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z\"\r\n                />\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth=\"2\"\r\n                  d=\"M15 13a3 3 0 11-6 0 3 3 0 016 0z\"\r\n                />\r\n              </svg>\r\n            </label>\r\n\r\n            <label className=\"cursor-pointer\">\r\n              <input\r\n                type=\"file\"\r\n                accept=\"video/mp4,video/quicktime\"\r\n                onChange={handleVideoChange}\r\n                className=\"hidden\"\r\n                disabled={images.length > 0 || isLoading}\r\n              />\r\n              <svg\r\n                className=\"w-8 h-8 text-blue-500 hover:text-blue-600\"\r\n                fill=\"none\"\r\n                stroke=\"currentColor\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                  strokeWidth=\"2\"\r\n                  d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"\r\n                />\r\n              </svg>\r\n            </label>\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isLoading || (!content && !video && images.length === 0)}\r\n            className={`px-6 py-2 rounded-lg font-semibold text-white\r\n              ${\r\n                isLoading || (!content && !video && images.length === 0)\r\n                  ? \"bg-gray-300 cursor-not-allowed\"\r\n                  : \"bg-blue-500 hover:bg-blue-600\"\r\n              }`}\r\n          >\r\n            {isLoading ? \"Posting...\" : \"Post\"}\r\n          </button>\r\n        </div>\r\n      </form>\r\n\r\n      {/* Add progress bar when uploading */}\r\n      {isLoading && progress > 0 && (\r\n        <div className=\"w-full h-2 bg-gray-200 rounded-full mb-4\">\r\n          <div\r\n            className=\"h-full bg-blue-500 rounded-full transition-all duration-300\"\r\n            style={{ width: `${progress}%` }}\r\n          ></div>\r\n          <p className=\"text-sm text-center mt-1\">Uploading: {progress}%</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CreatePost;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}